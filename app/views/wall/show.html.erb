
<%= render "layouts/signout" %>

<% content_for :stylesheet do %>
	<%= stylesheet_link_tag 'wall.css' %>
<% end %> 


<h2>Wall posts</h2>

<div class='row'>
	<div class='col-md-6'>
		<h3><%= @user[:first_name] %> <%= @user[:last_name] %> </h3>
	</div>
</div>
<div class='row'>
	<div class='col-md-6'>
		<h4>Registered at: <%= @user[:created_at] %> </h4>
		<h4>User ID: <%= @user[:id] %> </h4>
		<h4>Email Address: <%= @user[:email] %> </h4>
		<h4>Description: <%= @user[:description] %> </h4>
	</div>
</div>

<div class='row'>
	<div class='col-md-12'>
		<h4>Post a Message</h4>
		<!-- whos its from. the session id -->
		<!-- who is it to. the to   -->
		<form action='/messages/' method='post'>
			<input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
			<input type='hidden' name='user_id' value='<%= session[:user_id] %>'>
			<input type='hidden' name='to' value='<%= params[:id] %>'>
			<div class='form-group'>	
				<textarea class="form-control text-box" name='message'></textarea>
			</div>
			<div class='text-right'>
				<input type='submit' value='Create' />
			</div>
		</form>
		<% if flash[:error] != nil %>
			<%= flash[:error] %>
		<% end %>
	</div>
</div>
<!-- for loop for comments here -->
<% @messages.each do |message| %>
	<div class='row'>
		<div class='col-md-12'>
			<div class='post'>
				<h5> <%= message[:first_name] %>  <%= message[:created_at] %></h5>
				<p> <%= message[:message] %> </p>
			</div>
		</div>
		<!-- for loop for comments here -->
		<% @comments.each do |comment| %>
			<% if comment.message_id == message.id %>
			<div class='col-md-11 col-md-offset-1'>
				<h5> <%= comment.first_name %> | <%= comment.created_at %> </h5>
				<p> <%= comment.comment %> </p>
			</div>
			<% end %>
		<% end %>
		<div class='col-md-11 col-md-offset-1'>
			<div>
				<h5>Post a Comment</h5>
				<!-- what message id its to message[:id] -->
				<!-- who its from session[:user_id] -->
				<!-- whos wall is it for redirecting params[:id] -->
				<form action='/comments/' method='post'>
					<input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
					<input type='hidden' name='user_id' value='<%= session[:user_id] %>'>					
					<input type='hidden' name='message_id' value='<%= message[:id] %>'>
					<input type='hidden' name='current_wall' value='<%= params[:id] %>'>				
					<div class='form-group'>	
						<textarea class="form-control text-box" name='comment'></textarea>
					</div>
					<div class='text-right'>
						<input type='submit' value='Post a Comment' />
					</div>
				</form>
			</div>
		</div>
	</div>
<% end %>


